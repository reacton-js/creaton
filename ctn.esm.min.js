/**
* Creaton v3.0.2
* (c) 2022-2024 | github.com/reacton-js
* Released under the MIT License.
**/
const regUpName=/[A-Z]/g,regParams=/:(\w+)/g,regFile=/\.\w+$/,newDocument=(new DOMParser).parseFromString("","text/html"),regEntities=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"],[/'/g,"&#39;"]],AsyncFunction=Object.getPrototypeOf(async function(){}).constructor,getNameKebab=(e,t)=>(0<t?"-":"")+e,loadEvent=new DocumentFragment,rootStorage=new Set,getRoot=Symbol(),retRoot=Symbol(),getState=Symbol(),getTemp=Symbol(),funUpdate=Symbol(),propRouter=Symbol(),isLight=Symbol();async function _ctn(...e){for(let r of e){if(r instanceof HTMLTemplateElement){const s=r.content;var t=[...s.querySelectorAll("script")].map(e=>s.removeChild(e).innerHTML).join(""),t=await(t?new AsyncFunction(t)():null);if("function"!=typeof t){console.error(`Error: return value "${t}" is not a class`);continue}t.template=Function(`return this.$tag\`${r.innerHTML}\``),r=t}else if("function"!=typeof r){console.error(`Error: argument "${r}" is not a class or <template> element`);continue}t=r.name.replace(regUpName,getNameKebab).toLocaleLowerCase();const a=r.mode&&r.mode.toLocaleLowerCase();var n=r.extends&&r.extends.toLocaleLowerCase();const i=!!r.hasOwnProperty("serializable")&&r.serializable;var o=n?Object.getPrototypeOf(document.createElement(n)).constructor:HTMLElement;customElements.define(t,class extends o{constructor(){super(),rootStorage.add(this);const n=a?this.attachShadow({mode:a,serializable:i}):this;var e=new Proxy(new r,{get:(e,t)=>t===retRoot?n:(t in e?e:this)[t]});Object.defineProperties(this,{$host:{value:this},$shadow:{value:this.shadowRoot},$data:{value:this.dataset},$state:{value:new Proxy(e,{get:(e,t)=>{if("closed"!==a)return e[t]},set:(e,t,n)=>{if("closed"===a)throw new Error("cannot change the state of a closed component");return e[t]=n,!0}})},[getRoot]:{value:n},[getState]:{value:e},[getTemp]:{value:(new DOMParser).parseFromString("","text/html").body},[isLight]:{value:n===this}})}async connectedCallback(){"function"==typeof r.startConnect&&await r.startConnect.call(this[getState]),this[getRoot].innerHTML=r.template.call(this[getState])||"","function"==typeof r.connected&&r.connected.call(this[getState]),setTimeout(()=>{rootStorage.delete(this),0===rootStorage.size&&loadEvent.dispatchEvent(new CustomEvent("load"))},1)}disconnectedCallback(){"function"==typeof r.disconnected&&r.disconnected.call(this[getState])}adoptedCallback(){"function"==typeof r.adopted&&r.adopted.call(this[getState])}attributeChangedCallback(e,t,n){"function"==typeof r.changed&&null!==t&&r.changed.call(this[getState],e,t,n)}static get observedAttributes(){if(Array.isArray(r.attributes))return r.attributes}[funUpdate](){var e=performance.now();if("function"==typeof r.template){this[getTemp].innerHTML=r.template.call(this[getState])||"";for(var t=this[getRoot].childNodes,n=this[getTemp].childNodes,o=0;o<t.length||o<n.length;o++)updateDOM(this[getRoot],t[o],n[o],o)||o--;this[getTemp].innerHTML=""}return performance.now()-e+" ms"}get $event(){return _ctn.event}get $router(){return _ctn.router}$(e){return(this[retRoot]||this.$shadow||this).querySelector(e)}$$(e){return(this[retRoot]||this.$shadow||this).querySelectorAll(e)}$update(){if("closed"!==a||this[retRoot])return this[funUpdate]()}$tag(...e){return _ctn.tag.call(this,...e)}$entities(...e){return _ctn.entities(...e)}},n?{extends:n}:null)}}function updateDOM(e,t,n,o=0){if(t){if(!n)return!e.removeChild(e.childNodes[o]);if(t.nodeName!==n.nodeName)e.replaceChild(n.cloneNode(!0),e.childNodes[o]);else if(t.nodeValue!==n.nodeValue)t.nodeValue=n.nodeValue;else if(t.attributes&&((t.attributes.length||n.attributes.length)&&updateAttr(t,n),!t[isLight]))for(var r=t.childNodes,a=n.childNodes,i=0;i<r.length||i<a.length;i++)updateDOM(e.childNodes[o],r[i],a[i],i)||i--}else e.append(n.cloneNode(!0));return!0}function updateAttr(t,e){const n=t.attributes,o=e.attributes;new Set([...t.getAttributeNames(),...e.getAttributeNames()]).forEach(e=>{o[e]&&!n[e]?t.setAttribute(e,o[e].value):n[e]&&!o[e]?t.removeAttribute(e):n[e]&&o[e]&&n[e].value!==o[e].value&&(n[e].value=o[e].value)})}function routerCallback(e,t,n){var o,r,a=e[propRouter].regs,i=t.replace(location.origin,"");for([o,r]of a){var s,l=o.exec(i);l&&((s=new CustomEvent(r,{detail:n})).url=new URL(t),s.params=l.groups,s.search=s.url.searchParams,e.dispatchEvent(s))}}function renderCallback(t,n,o,r){if(!r||"STYLE"!==t.nodeName&&"SCRIPT"!==t.nodeName&&"TEMPLATE"!==t.nodeName&&8!==t.nodeType){let e;if("SLOT"!==t.nodeName||o)if(t[getRoot]){e=newDocument.createElement(t.nodeName);for(var a of t.attributes)e.setAttribute(a.name,a.value);t=t[getRoot]}else e=t.cloneNode(!1);else e=new DocumentFragment;var i=t.assignedNodes?t.assignedNodes({flatten:!1}):(t.content||t).childNodes;if(i)for(var s=0;s<i.length;s++)renderCallback(i[s],e.content||e,o,r);n.append(e)}}_ctn.tag=function(e,...t){let n="";for(var o,r=0;r<e.length;r++)n+=e.raw[r],r<t.length&&(Array.isArray(t[r])?n+=t[r].join(""):"function"==typeof t[r]?(o=t[r].call(this),n+=Array.isArray(o)?o.join(""):o):n+=t[r]);return n},_ctn.entities=function(e,...t){return(t.length?[...regEntities,...t]:regEntities).reduce((e,t)=>e.replace(...t),e)},_ctn.event=function(e,t,n=null){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(t,{detail:n}))},_ctn.router=function(t,e,n=null){if(new.target){const r={},a=new Map,t=new class extends DocumentFragment{addEventListener(...e){a.set(new RegExp(`^/?${e[0].replace(regParams,(e,t)=>`(?<${t}>\\w+)`)}/?$`),e[0]),document.addEventListener.call(this,...e)}};return t[propRouter]={idx:0,vals:r,regs:a},window.addEventListener("popstate",e=>{routerCallback(t,location.href,r[e.state])}),t}var o;e&&e.startsWith(location.origin)&&!regFile.test(e)&&(o=t[propRouter],history.pushState(o.idx,"",e),routerCallback(t,e,o.vals[o.idx++]=n))},_ctn.render=async function({parent:e=document.children[0],slots:t=!1,clean:n=!0}={}){await new Promise(e=>loadEvent.addEventListener("load",e));var o=document.createElement("template");return renderCallback(e,o.content,t,n),e===document.children[0]?`<!DOCTYPE html>
`+o.innerHTML:o.innerHTML};export default _ctn;const Tag=_ctn.tag,Entities=_ctn.entities,Event=_ctn.event,Router=_ctn.router,Render=_ctn.render;export{Tag,Entities,Event,Router,Render};