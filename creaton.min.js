/*!
 * Creaton.js v2.3.0
 * (c) 2022-2023 | github.com/reacton-js
 * Released under the MIT License.
 */
"use strict";!function(){const n=/[A-Z]/g,r=new WeakMap,i=document.implementation.createHTMLDocument(),l={get(e,t){return e[t]?e[t].value:void 0},set(e,t,a){return e[t].value=a,!0}};function c(t,a,n,o=0){if(n){if(!a)return!t.removeChild(t.childNodes[o]);if(a.nodeType!==n.nodeType||a.nodeName!==n.nodeName)t.replaceChild(a.cloneNode(!0),t.childNodes[o]);else if(a.nodeValue!==n.nodeValue)n.nodeValue=a.nodeValue;else if(a.childNodes.length){if(!new.target&&(a.attributes&&e(a.attributes,n),n.$light))return!0;for(let e=0;e<a.childNodes.length||e<n.childNodes.length;e++)c(new.target?t:t.childNodes[o],a.childNodes[e],n.childNodes[e],e)||e--}}else t.append(a.cloneNode(!0));return!0}function e(t,a,n=a.attributes){for(let e=0;e<t.length||e<n.length;e++)t[e]&&!n[t[e].name]?(a.setAttribute(t[e].name,t[e].value),e--):n[e]&&!t[n[e].name]?(a.removeAttribute(n[e].name),e--):n[t[e].name].value!==t[e].value&&(n[e].value=t[e].value)}function d(e,...t){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(...t))}const o=/:(\w+)/g,s=new WeakSet;function u(t,e,a=null){if(new.target){const n={};return new class extends DocumentFragment{addEventListener(...e){n[e[0]]=new RegExp(`^${e[0].replace(o,(e,t)=>`(?<${t}>\\w+)`)}/?$`),document.addEventListener.call(this,...e)}getEventRegs(){return n}}}s.has(t)||(s.add(t),window.addEventListener("popstate",e=>{h(t,location.href.replace(location.origin,""),e.state)})),e&&(e=e.replace(location.origin,""),history.pushState(a,"",e),h(t,e,a))}function h(e,t,a){var n=e.getEventRegs();for(const r in n){var o,s=n[r].exec(t);s&&((o=new CustomEvent(r)).url=new URL(location.href),o.params=s.groups,e.dispatchEvent(o,a))}}window.Creaton=(...e)=>e.forEach(e=>"function"!=typeof e||function(o){const s=(o.mode||"").toLowerCase();var e=(o.extends||"").toLowerCase(),t=o.name.replace(n,(e,t)=>(0<t?"-":"")+e.toLowerCase()),a=e?Object.getPrototypeOf(document.createElement(e)).constructor:HTMLElement;customElements.define(t,class extends a{constructor(){super();var e=s?this.attachShadow({mode:s}):this;let t;t=e===this?i.createElement(this.nodeName):document.createElement("template");var a=new Proxy(new o,{get:(e,t,a)=>t in e?Reflect.get(e,t,a):this[t]}),n=new Proxy(this.attributes,l);Object.defineProperties(this,{$state:{value:a},$props:{value:n},$light:{value:e===this||!1},$shadow:{value:this.shadowRoot},$host:{value:s&&"closed"!==s?this:void 0},$event:{value:d},$route:{value:u}}),r.set(this.$state,{root:e,template:t})}async $update(e){var t=Date.now(),{root:a,template:n}=r.get(this.$state);return e&&Object.assign(this.$state,e),await(!o.before||o.before.call(this.$state)),n.innerHTML=await(o.render?o.render.call(this.$state):""),new c(a,n.content||n,a),n.innerHTML="",await(!o.after||o.after.call(this.$state)),Date.now()-t+" ms"}async connectedCallback(){await this.$update(),await(!o.connected||o.connected.call(this.$state))}async disconnectedCallback(){await(!o.disconnected||o.disconnected.call(this.$state))}async adoptedCallback(){await(!o.adopted||o.adopted.call(this.$state))}async attributeChangedCallback(...e){await(!o.changed||o.changed.apply(this.$state,e))}static get observedAttributes(){if(Array.isArray(o.attributes))return o.attributes}$(e){return(this===this.$state||"closed"!==s?r.get(this.$state).root:this.$host).querySelector(e)}$$(e){return(this===this.$state||"closed"!==s?r.get(this.$state).root:this.$host).querySelectorAll(e)}$tag(t,...a){let n="";for(let e=0;e<t.length;e++)n+=t[e],e<a.length&&(n+=Array.isArray(a[e])?a[e].join(""):a[e]);return n}},e?{extends:e}:null)}(e)),window.Creaton.event=d,window.Creaton.route=u}();