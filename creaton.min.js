/*!
 * Creaton.js v2.1.0
 * (c) 2022-2023 | github.com/reacton-js
 * Released under the MIT License.
 */
"use strict";!function(){const o=/[A-Z]/g,r=new WeakMap,i=document.implementation.createHTMLDocument(),c={get(e,t){return e[t]?e[t].value:void 0},set(e,t,n){return e[t].value=n,!0}};function l(t,n,a,s=0){if(a){if(!n)return!t.removeChild(t.childNodes[s]);if(n.nodeType!==a.nodeType||n.nodeName!==a.nodeName)t.replaceChild(n.cloneNode(!0),t.childNodes[s]);else if(n.nodeValue!==a.nodeValue)a.nodeValue=n.nodeValue;else if(n.childNodes.length){if(!new.target&&(n.attributes&&e(n.attributes,a),a.$state)&&a.$light)return!0;for(let e=0;e<n.childNodes.length||e<a.childNodes.length;e++)l(new.target?t:t.childNodes[s],n.childNodes[e],a.childNodes[e],e)||e--}}else t.append(n.cloneNode(!0));return!0}function e(t,n,a=n.attributes){for(let e=0;e<t.length||e<a.length;e++)t[e]&&!a[t[e].name]?(n.setAttribute(t[e].name,t[e].value),e--):a[e]&&!t[a[e].name]?(n.removeAttribute(a[e].name),e--):a[t[e].name].value!==t[e].value&&(a[e].value=t[e].value)}function d(e,...t){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(...t))}const s=/:(\w+)/g,u=new WeakSet;function h(t,e,n=null){if(new.target){const a={};return new class extends DocumentFragment{addEventListener(...e){a[e[0]]=new RegExp(`^${e[0].replace(s,(e,t)=>`(?<${t}>\\w+)`)}/?$`),document.addEventListener.call(this,...e)}getEventRegs(){return a}}}u.has(t)||(u.add(t),window.addEventListener("popstate",e=>{g(t,location.href.replace(location.origin,""),e.state)})),e&&(e=e.replace(location.origin,""),history.pushState(n,"",e),g(t,e,n))}function g(e,t,n){var a=e.getEventRegs();for(const r in a){var s,o=a[r].exec(t);o&&((s=new CustomEvent(r)).url=new URL(location.href),s.params=o.groups,e.dispatchEvent(s,n))}}window.Creaton=(...e)=>e.forEach(e=>"function"!=typeof e||function(s){const a=(s.mode||"").toLowerCase();var e=(s.extends||"").toLowerCase(),t=s.name.replace(o,(e,t)=>(0<t?"-":"")+e.toLowerCase()),n=e?Object.getPrototypeOf(document.createElement(e)).constructor:HTMLElement;customElements.define(t,class extends n{constructor(){super();var e=a?this.attachShadow({mode:a}):this;let t;t=e===this?i.createElement(this.nodeName):document.createElement("template");var n=new Proxy(new s,{get:(e,t,n)=>t in e?Reflect.get(e,t,n):this[t]}),n=(Object.defineProperty(this,"$state",{value:n}),new Proxy(this.attributes,c));r.set(this.$state,{root:e,template:t,attributes:n})}async $update(e){var t=Date.now(),{root:n,template:a}=r.get(this.$state);return e&&Object.assign(this.$state,e),await(!s.before||s.before.call(this.$state)),a.innerHTML=await(s.render?s.render.call(this.$state):""),new l(n,a.content||a,n),a.innerHTML="",await(!s.after||s.after.call(this.$state)),Date.now()-t+" ms"}async connectedCallback(){await this.$update(),await(!s.connected||s.connected.call(this.$state))}async disconnectedCallback(){await(!s.disconnected||s.disconnected.call(this.$state))}async adoptedCallback(){await(!s.adopted||s.adopted.call(this.$state))}async attributeChangedCallback(...e){await(!s.changed||s.changed.apply(this.$state,e))}static get observedAttributes(){if(Array.isArray(s.attributes))return s.attributes}get $shadow(){return this.shadowRoot}get $light(){return r.get(this.$state).root===this||!1}get $host(){return r.get(this.$state).root===this?this:this.shadowRoot?this.shadowRoot.host:void 0}get $props(){return r.get(this.$state).attributes}get $event(){return d}get $route(){return h}$(e){return(this===this.$state||"closed"!==a?r.get(this.$state).root:this.$host).querySelector(e)}$$(e){return(this===this.$state||"closed"!==a?r.get(this.$state).root:this.$host).querySelectorAll(e)}},e?{extends:e}:null)}(e)),window.Creaton.event=d,window.Creaton.route=h}();